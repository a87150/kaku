<div class="input-group" id="addtag" style="width: 200px;">
    <input type="text" class="form-control" placeholder="tag" id="tag_input"/>
    <span class="input-group-btn">
        <button type="button" class="btn btn-default" id="tag_post">添加</button>
    </span>
</div>

<script>
$.ajaxSetup({
    data: {csrfmiddlewaretoken: '{{ csrf_token }}' },
});
    $(document).ready(function(){
        $("#tag_post").click(function(){
            var tag = $("#tag_input").val();
            var id = $('.id').text();
            var type = $('.type').text();
            
            if (tag == '') {
                alert('不能为空');
            }
            else{
                $(this).attr("disabled","true");
                setTimeout("$('#tag_post').removeAttr('disabled')",3000);
                $.post("/tags/",{'tag':tag, 'id':id, 'type':type}, function(ret){
                    $("#addtag").after("\<div class=\"alert alert-warning\"><a href=\"#\" class=\"close\" data-dismiss=\"alert\">&times;</a><strong>"+ret+"</strong></div>");
                });
            };
        });
    });
</script>